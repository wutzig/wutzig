(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,n){},74:function(e,t,n){e.exports=n(91)},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(30),o=n.n(i),s=(n(79),n(5)),c=n.n(s),l=n(8),u=n(1);n(81),n(82);function h(e){return a.a.createElement("div",{className:"menu"},[1,2,3,4].map((function(t){return a.a.createElement("div",{key:t,onClick:function(){return e.clickHandler(t)},className:e.activeMenu===t?"menuItem active":"menuItem"},a.a.createElement("div",{className:"menuText"},"item ",t))})))}n(83),n(84);function d(e){var t=function(t){t.target.classList.contains("bottom")&&window.scrollTo({top:0,behavior:"smooth"}),e.currentPage>1&&"prev"===t.target.id&&e.clickHandler(e.currentPage-1),e.currentPage<e.numPages&&"next"===t.target.id&&e.clickHandler(e.currentPage+1)};return a.a.createElement("div",{style:{marginTop:"10px"}},a.a.createElement("button",{style:{margin:0},onClick:t,className:e.bottom?"bottom":"",id:"prev"},"\u276e"),a.a.createElement("div",{className:"pageText"},e.currentPage," of ",e.numPages),a.a.createElement("button",{style:{margin:0},onClick:t,className:e.bottom?"bottom":"",id:"next"},"\u276f"))}n(85);function f(e){return a.a.createElement("div",{onClick:function(t){return window.open(e.url,"_blank")},className:"Job"},a.a.createElement("div",{className:"Logo"},e.company_logo&&a.a.createElement("img",{src:e.company_logo,alt:"no img"})),a.a.createElement("div",{className:"Title"},e.title),a.a.createElement("div",{className:"Company"},e.company),a.a.createElement("div",{className:"Location"},e.location),a.a.createElement("div",{className:"Created"},e.created_at))}function m(e){return a.a.createElement("div",{className:"JobList"},a.a.createElement("h4",null,"found ",e.jobs.length," jobs"),a.a.createElement(d,{clickHandler:e.setCurrentPage,numPages:Math.ceil(e.jobs.length/10),currentPage:e.currentPage}),e.jobs.slice(10*(e.currentPage-1),10*e.currentPage).map((function(e){return a.a.createElement(f,{key:e.id,title:e.title,company:e.company,company_logo:e.company_logo,location:e.location,created_at:e.created_at,url:e.url})})),a.a.createElement(d,{bottom:!0,clickHandler:e.setCurrentPage,numPages:Math.ceil(e.jobs.length/10),currentPage:e.currentPage}))}var p=n(2),g=n(4);n(22),n(86);function y(e){return e.waitingPlus?a.a.createElement("div",{className:"lds-dual-ring"}):a.a.createElement("button",{onClick:function(t){return e.createHandler(t,e.planId)},className:"Plus"},"\u271a")}function _(e){var t,n,r;return e.done?(t=a.a.createElement("span",null,"\u2714"),n="green",r="Done Active"):(t=a.a.createElement("span",null,"\u2718"),n="red",r="Done"),a.a.createElement("div",{className:"Plan"},a.a.createElement("div",{className:"Headline"},a.a.createElement(y,{planId:e.planId,createHandler:e.createHandler,waitingPlus:e.waitingPlus}),a.a.createElement("input",{onFocus:function(t){return e.focusHandler(t,e.planId)},onBlur:e.blurHandler,onChange:e.changeHandler,className:"Name",value:e.name}),a.a.createElement("button",{onClick:function(t){return e.doneHandler(t,e.planId)},className:r,style:{color:"".concat(n)}},t)),a.a.createElement("div",{className:"ToDoList"},e.plans.map((function(t){return t.parentPlanId===e.planId&&a.a.createElement(_,{key:t._id,planId:t._id,focusHandler:e.focusHandler,blurHandler:e.blurHandler,changeHandler:e.changeHandler,doneHandler:e.doneHandler,createHandler:e.createHandler,name:t.name,done:t.done,waitingPlus:t.waitingPlus,plans:e.plans})}))))}function v(e){var t=a.a.useState(),n=Object(u.a)(t,2),r=n[0],i=n[1],o=a.a.useState(!1),s=Object(u.a)(o,2),h=s[0],d=s[1],f=function(t,n){var r,a,i;n?(i=e.plans.findIndex((function(e){return n===e._id})),r=e.plans[i],a=Object(g.a)(Object(g.a)({},r),{},{waitingPlus:!0}),e.setPlans([].concat(Object(p.a)(e.plans.slice(0,i)),[a],Object(p.a)(e.plans.slice(i+1))))):d(!0),fetch("/api/todo/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentPlanId:n}),withCredentials:!0,credentials:"include"}).then(function(){var t=Object(l.a)(c.a.mark((function t(o){var s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.json();case 2:s=t.sent,n?(a=Object(g.a)(Object(g.a)({},r),{},{waitingPlus:!1}),e.setPlans([s].concat([].concat(Object(p.a)(e.plans.slice(0,i)),[a],Object(p.a)(e.plans.slice(i+1)))))):(d(!1),e.setPlans([s].concat(e.plans)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}))},m=function(){fetch("/api/todo/find",{withCredentials:!0,credentials:"include"}).then(function(){var t=Object(l.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:r=t.sent,e.setPlans(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.error(e)}))},v=function(t,n){var r=e.plans.findIndex((function(e){return n===e._id})),a=e.plans[r];fetch("/api/todo/done/"+n).catch((function(e){return console.error(e)}));var i=Object(g.a)(Object(g.a)({},a),{},{done:!a.done});e.setPlans([].concat(Object(p.a)(e.plans.slice(0,r)),[i],Object(p.a)(e.plans.slice(r+1)))),t.stopPropagation()},b=function(t){var n=e.plans[r],a=Object(g.a)(Object(g.a)({},n),{},{name:t.currentTarget.value});e.setPlans([].concat(Object(p.a)(e.plans.slice(0,r)),[a],Object(p.a)(e.plans.slice(r+1))))},E=function(t,n){var r=e.plans.findIndex((function(e){return n===e._id}));i(r),t.stopPropagation()},L=function(t){var n=t.currentTarget.value,a=e.plans[r];fetch("/api/todo/name/"+a._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})}).catch((function(e){return console.error(e)})),t.stopPropagation()};return a.a.createElement("div",null,a.a.createElement("h1",null,"To Do List"),a.a.createElement(y,{createHandler:f,planId:null,waitingPlus:h}),a.a.createElement("button",{className:"Rect",onClick:function(){fetch("/api/todo/delete",{withCredentials:!0,credentials:"include"}).then((function(){return m()})).catch((function(e){return console.error(e)}))}},"Delete All"),a.a.createElement("button",{className:"Rect",onClick:m},"Find All"),a.a.createElement("div",{id:"TopList",className:"ToDoList"},e.plans.map((function(t){return!t.parentPlanId&&a.a.createElement(_,{key:t._id,planId:t._id,focusHandler:E,blurHandler:L,changeHandler:b,doneHandler:v,createHandler:f,name:t.name,done:t.done,waitingPlus:t.waitingPlus,plans:e.plans})}))))}var b=n(10),E=n(11);function L(e){var t=a.a.createRef(null),n=window.screen.width,r=window.screen.height>n?1:.75;return a.a.useEffect((function(){function e(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function a(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}function i(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]}function o(e,t){return[t*e[0],t*e[1],t*e[2]]}function s(t,n,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],c=o(n,Math.sin(r/2)),l=i(t,s),u=a(t,e(o(c,2),a(e(c,l),o(l,Math.cos(r/2)))));return u}var c,l,u,h,d=!1,f=!1,m=0,p=0,g=!0,y=0,_=0,v=0,L=0,w=[],D=[],I=[2550,2700,3750],j=[-.48,-.51,-Math.sqrt(1-.2304-.2601)],R=e(j,[0,1,0]),x=e(R=o(R,1/Math.sqrt((h=R,(u=R)[0]*h[0]+u[1]*h[1]+u[2]*h[2]))),j),C=t.current.getBoundingClientRect(),S=t.current.getContext("webgl2");function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n?(O.cylinders.push(O.spheres[0]),O.cylinder_axes.push([0,0,0]),O.cylinder_axes[0][e]=t,O.cylinder_colors.push(O.sphere_colors[0]),O.cylinder_radius.push(Math.sqrt(O.sphere_radius2[0])),O.cylinder_length.push(0),O.spheres.push(O.spheres[0]),O.sphere_colors.push(O.sphere_colors[0]),O.sphere_radius2.push(O.sphere_radius2[0]),O.sphere_inv_radius.push(O.sphere_inv_radius[0])):0===O.cylinder_axes[O.cylinders.length-1][e]&&(O.cylinders.push(O.spheres[O.spheres.length-1]),O.cylinder_axes.push([0,0,0]),O.cylinder_axes[O.cylinder_axes.length-1][e]=t,O.cylinder_colors.push(O.sphere_colors[0]),O.cylinder_radius.push(O.cylinder_radius[0]),O.cylinder_length.push(0),O.spheres.push(O.spheres[O.spheres.length-1]),O.sphere_colors.push(O.sphere_colors[0]),O.sphere_radius2.push(O.sphere_radius2[0]),O.sphere_inv_radius.push(O.sphere_inv_radius[0]))}S||alert("Unable to initialize WebGL2. Your browser or machine may not support it."),t.current.oncontextmenu=function(e){e.preventDefault()},t.current.onmousemove=function(e){!0===f&&(y+=(m-e.clientX)/C.width*Math.PI,m=e.clientX,_+=(p-e.clientY)/C.height*Math.PI,p=e.clientY)},t.current.onmouseout=function(e){},t.current.onmousedown=function(e){0!==e.button&&2===e.button&&(f=!0,d=!0,m=e.clientX,p=e.clientY)},t.current.onmouseup=function(e){0===e.button?t.current.webkitRequestFullscreen?t.current.webkitRequestFullScreen():t.current.mozRequestFullScreen():2===e.button&&(f=!1,d=!1)},t.current.ontouchstart=function(e){c=e.touches[0].clientX,l=e.touches[0].clientY},t.current.ontouchmove=function(e){e.preventDefault(),e.stopPropagation()},t.current.ontouchend=function(e){e.preventDefault(),e.stopPropagation();var t,n,r=e.changedTouches[0].clientX-c,a=e.changedTouches[0].clientY-l,i=Math.abs(a/r),o=!1;i>5?(t=1,n=a>0?-1:1,o=!0):i<.2?(t=0,n=r>0?1:-1,o=!0):r*a>0&&(t=2,n=r>0?-1:1,o=!0),o&&k(t,n,0===O.cylinders.length)},document.onkeydown=function(e){switch(e.keyCode){case 87:I=a(I,o(O.cameraDirection,10));break;case 83:I=i(I,o(O.cameraDirection,10));break;case 65:I=i(I,o(O.cameraRight,10));break;case 68:I=a(I,o(O.cameraRight,10));break;case 71:g=!g;break;case 37:O.cylinders.length>0?k(0,-1):k(0,-1,!0),e.preventDefault();break;case 38:O.cylinders.length>0?k(2,-1):k(2,-1,!0),e.preventDefault();break;case 39:O.cylinders.length>0?k(0,1):k(0,1,!0),e.preventDefault();break;case 40:O.cylinders.length>0?k(2,1):k(2,1,!0),e.preventDefault();break;case 17:O.cylinders.length>0?k(1,-1):k(1,-1,!0),e.preventDefault();break;case 16:O.cylinders.length>0?k(1,1):k(1,1,!0),e.preventDefault()}};var O=new(function(){function e(){Object(b.a)(this,e),this.SPEED=400,this.MAX_SPHERES=30,this.MAX_CYLINDERS=30,this.cameraDirection=j,this.cameraUp=x,this.cameraRight=R,this.cameraPos=I,this.cylinders=[],this.cylinder_axes=[],this.cylinder_colors=[],this.cylinder_radius=[],this.cylinder_length=[],this.spheres=[],this.sphere_radius2=[],this.sphere_inv_radius=[],this.sphere_colors=[],this.squares=[[0,0,0],[0,0,0],[0,0,0]],this.square_length=1800,this.square_dir=[[0,0,1],[1,0,0],[1,0,0],[0,1,0],[0,1,0],[0,0,1]],this.square_norm=[[0,1,0],[0,0,1],[1,0,0]],this.square_colors=[[.4,.78,.8],[.8,.65,.6],[.8,.9,.7]],this.spheres.push([900,900,900]),this.sphere_radius2.push(6400),this.sphere_inv_radius.push(1/80),this.sphere_colors.push([.75,.75,.75]),this.lightLocation=[1400,2800,1400],this.cos_phi=[],this.sin_phi=[];for(var t=0;t<12;t++){var n=Math.PI/6*t;this.cos_phi.push(Math.cos(n)),this.sin_phi.push(Math.sin(n))}for(var r=0;r<8;r++){var a=Math.PI/4*r;this.cos_phi.push(2/3*Math.cos(a)),this.sin_phi.push(2/3*Math.sin(a))}for(var i=0;i<4;i++){var o=Math.PI/2*i;this.cos_phi.push(1/3*Math.cos(o)),this.sin_phi.push(1/3*Math.sin(o))}}return Object(E.a)(e,[{key:"drawScene",value:function(e,t,n){S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.cylinders.length>0&&this.spheres.length>0&&(this.cylinder_length[this.cylinders.length-1]=this.cylinder_length[this.cylinders.length-1]+n*this.SPEED,this.spheres[this.spheres.length-1]=a(this.spheres[this.spheres.length-1],o(this.cylinder_axes[this.cylinders.length-1],n*this.SPEED)),g||(this.spheres[0]=a(this.spheres[0],o(this.cylinder_axes[0],n*this.SPEED)),this.cylinders[0]=a(this.cylinders[0],o(this.cylinder_axes[0],n*this.SPEED)),this.cylinder_length[0]-=n*this.SPEED,this.cylinder_length[0]<=0&&(this.spheres.shift(),this.sphere_colors.shift(),this.sphere_inv_radius.shift(),this.sphere_radius2.shift(),this.cylinders.shift(),this.cylinder_axes.shift(),this.cylinder_colors.shift(),this.cylinder_length.shift(),this.cylinder_radius.shift()))),this.lightLocation=s(this.lightLocation,[0,1,0],n,[1100,2800,1100]),e.start(),this.cameraPos=I,S.uniform3fv(e.uniformLocations.cameraDirLoc,this.cameraDirection),S.uniform3fv(e.uniformLocations.cameraUpLoc,this.cameraUp),S.uniform3fv(e.uniformLocations.cameraRightLoc,this.cameraRight),S.uniform3fv(e.uniformLocations.cameraPosLoc,this.cameraPos),S.uniform3fv(e.uniformLocations.lightLoc,this.lightLocation),S.uniform1f(e.uniformLocations.timeLoc,0),S.uniform1i(e.uniformLocations.numSpheresLoc,this.spheres.length),S.uniform1i(e.uniformLocations.numCylindersLoc,this.cylinders.length);for(var r=0;r<this.spheres.length;r++)S.uniform3fv(e.uniformLocations.sphereCenLoc[r],this.spheres[r]),S.uniform3fv(e.uniformLocations.sphereColLoc[r],this.sphere_colors[r]),S.uniform1f(e.uniformLocations.sphereRadius2Loc[r],this.sphere_radius2[r]),S.uniform1f(e.uniformLocations.sphereInvRadiusLoc[r],this.sphere_inv_radius[r]);for(var i=0;i<this.cylinders.length;i++)S.uniform3fv(e.uniformLocations.cylinderCenLoc[i],this.cylinders[i]),S.uniform3fv(e.uniformLocations.cylinderAxisLoc[i],this.cylinder_axes[i]),S.uniform3fv(e.uniformLocations.cylinderColLoc[i],this.cylinder_colors[i]),S.uniform1f(e.uniformLocations.cylinderRadiusLoc[i],this.cylinder_radius[i]),S.uniform1f(e.uniformLocations.cylinderLengthLoc[i],this.cylinder_length[i]);for(var c=0;c<this.squares.length;c++)S.uniform3fv(e.uniformLocations.squareLoc[c],this.squares[c]),S.uniform3fv(e.uniformLocations.squareNormLoc[c],this.square_norm[c]),S.uniform3fv(e.uniformLocations.squareUDirLoc[c],this.square_dir[2*c]),S.uniform3fv(e.uniformLocations.squareVDirLoc[c],this.square_dir[2*c+1]),S.uniform3fv(e.uniformLocations.squareColLoc[c],this.square_colors[c]),S.uniform1f(e.uniformLocations.squareLenLoc[c],this.square_length);for(var l=0;l<24;l++)S.uniform1f(e.uniformLocations.cosLoc[l],this.cos_phi[l]),S.uniform1f(e.uniformLocations.sinLoc[l],this.sin_phi[l]);t.prepare(),S.drawElements(S.TRIANGLES,t.vertexCount,S.UNSIGNED_SHORT,0),t.unbind(),e.stop()}}]),e}()),N=function(){function e(t,n){Object(b.a)(this,e),this.vaoID=t,this.vertexCount=n}return Object(E.a)(e,[{key:"prepare",value:function(){S.bindVertexArray(this.vaoID),S.enableVertexAttribArray(0)}},{key:"unbind",value:function(){S.disableVertexAttribArray(0),S.bindVertexArray(null)}}]),e}(),P=function(){function e(t,n){function r(e,t){var n=S.createShader(t);if(S.shaderSource(n,e),S.compileShader(n),!S.getShaderParameter(n,S.COMPILE_STATUS)){var r=S.getShaderInfoLog(n);return alert("Failed to compile "+t+" with these errors:"+r),S.deleteShader(n),null}return n}if(Object(b.a)(this,e),this.vertexShaderID=r(t.vsSource,S.VERTEX_SHADER),this.fragmentShaderID=r(t.fsSource,S.FRAGMENT_SHADER),this.programID=S.createProgram(),S.attachShader(this.programID,this.vertexShaderID),S.attachShader(this.programID,this.fragmentShaderID),S.bindAttribLocation(this.programID,0,"aVertexPosition"),S.linkProgram(this.programID),!S.getProgramParameter(this.programID,S.LINK_STATUS))return alert("Unable to initialize the shader program: "+S.getProgramInfoLog(this.programID)),null;for(var a=[],i=[],o=[],s=[],c=[],l=[],u=[],h=[],d=[],f=[],m=[],p=[],g=[],y=[],_=[],v=[],E=[],L=0;L<24;L++){var w="cosPhi["+L+"]";v.push(S.getUniformLocation(this.programID,w)),w="sinPhi["+L+"]",E.push(S.getUniformLocation(this.programID,w))}for(var D=0;D<O.MAX_SPHERES;D++){var I="spheres["+D+"].center";a.push(S.getUniformLocation(this.programID,I)),I="spheres["+D+"].color",i.push(S.getUniformLocation(this.programID,I)),I="spheres["+D+"].radius2",o.push(S.getUniformLocation(this.programID,I)),I="spheres["+D+"].inv_radius",s.push(S.getUniformLocation(this.programID,I))}for(var j=0;j<O.MAX_CYLINDERS;j++){var R="cylinders["+j+"].pos";c.push(S.getUniformLocation(this.programID,R)),R="cylinders["+j+"].axis",l.push(S.getUniformLocation(this.programID,R)),R="cylinders["+j+"].color",u.push(S.getUniformLocation(this.programID,R)),R="cylinders["+j+"].radius",h.push(S.getUniformLocation(this.programID,R)),R="cylinders["+j+"].length",d.push(S.getUniformLocation(this.programID,R))}for(var x=0;x<n;x++){var C="squares["+x+"].pos";f.push(S.getUniformLocation(this.programID,C)),C="squares["+x+"].color",m.push(S.getUniformLocation(this.programID,C)),C="squares["+x+"].norm",p.push(S.getUniformLocation(this.programID,C)),C="squares["+x+"].uDir",g.push(S.getUniformLocation(this.programID,C)),C="squares["+x+"].vDir",y.push(S.getUniformLocation(this.programID,C)),C="squares["+x+"].length",_.push(S.getUniformLocation(this.programID,C))}this.uniformLocations={cameraDirLoc:S.getUniformLocation(this.programID,"camera_dir"),cameraUpLoc:S.getUniformLocation(this.programID,"camera_up"),cameraRightLoc:S.getUniformLocation(this.programID,"camera_right"),cameraPosLoc:S.getUniformLocation(this.programID,"camera_pos"),lightLoc:S.getUniformLocation(this.programID,"light"),timeLoc:S.getUniformLocation(this.programID,"time"),numCylindersLoc:S.getUniformLocation(this.programID,"numCylinders"),numSpheresLoc:S.getUniformLocation(this.programID,"numSpheres"),cosLoc:v,sinLoc:E,squareLenLoc:_,sphereCenLoc:a,sphereColLoc:i,sphereRadius2Loc:o,sphereInvRadiusLoc:s,cylinderCenLoc:c,cylinderAxisLoc:l,cylinderColLoc:u,cylinderRadiusLoc:h,cylinderLengthLoc:d,squareLoc:f,squareNormLoc:p,squareUDirLoc:g,squareVDirLoc:y,squareColLoc:m}}return Object(E.a)(e,[{key:"start",value:function(){S.useProgram(this.programID)}},{key:"stop",value:function(){S.useProgram(null)}},{key:"cleanUp",value:function(){this.stop(),S.detachShader(this.programID,this.vertexShaderID),S.detachShader(this.programID,this.fragmentShaderID),S.deleteShader(this.vertexShaderID),S.deleteShader(this.fragmentShaderID),S.deleteProgram(this.programID)}}]),e}(),M=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,null,[{key:"loadToVAO",value:function(e){var t=S.createVertexArray();w.push(t),S.bindVertexArray(t);var n=S.createBuffer();return D.push(n),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,n),S.bufferData(S.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.indices),S.STATIC_DRAW),n=S.createBuffer(),D.push(n),S.bindBuffer(S.ARRAY_BUFFER,n),S.bufferData(S.ARRAY_BUFFER,new Float32Array(e.positions),S.STATIC_DRAW),S.vertexAttribPointer(0,2,S.FLOAT,!1,0,0),S.bindVertexArray(null),new N(t,e.indices.length)}}]),e}();!function(){console.log(window.devicePixelRatio);var t={vsSource:"#version 300 es\n                    in vec2 aVertexPosition;\n                    void main(void) {\n                        gl_Position = vec4(aVertexPosition, 0.0, 1.0);\n                    }",fsSource:"#version 300 es\n                    precision highp float;\n                    out vec4 fragmentColor;\n                    uniform vec3 camera_dir;\n                    uniform vec3 camera_up;\n                    uniform vec3 camera_right;\n                    uniform vec3 camera_pos;\n                    \n                    struct HitInfo{\n                        bool hit;\n                        float dist_from_cam;\n                    };\n        \n                    struct Square{\n                        vec3 pos, norm, uDir, vDir, color;\n                        float length;\n                    };\n        \n                    struct Sphere{\n                        vec3 center, color;\n                        float radius2, inv_radius;\n                    };\n        \n                    struct Ray{\n                        vec3 origin, direction;\n                    };\n                    struct Cylinder{\n                        vec3 pos, axis, color;\n                        float radius, length;\n                    };\n        \n                    uniform Square squares[3];\n                    uniform Sphere spheres["+O.MAX_SPHERES+"];\n                    uniform Cylinder cylinders["+O.MAX_CYLINDERS+"];\n                    uniform vec3 light;\n                    uniform float cosPhi[24];\n                    uniform float sinPhi[24];\n                    uniform float time;\n                    uniform int numCylinders, numSpheres;\n        \n                    #define MAX pow(10.0, 6.0)\n                    const float width = float("+Math.min(n,800)+");\n                    const float height = float("+Math.min(n,800)*r+");\n                    const float screen_dist = 1.0 * width;\n                    const float light_radius = 200.0;\n                    const float light_radius2 = 40000.0;\n                    \n                    HitInfo shoot_ray_at_cylinder(Ray ray, Cylinder cylinder, float closest_dist){\n                        bool hit = false;\n                        float min_dist = 0.0;\n                        vec3 Dir = cylinder.pos - ray.origin;\n                        float RayCyl = dot(ray.direction, cylinder.axis);\n                        float oneMinRayCyl2 = 1.0 - RayCyl * RayCyl;\n                        float DirRay = dot(Dir, ray.direction);\n                        float DirCyl = dot(Dir, cylinder.axis);\n                        float DirDir = dot(Dir, Dir);\n                        float dist2 = 2.0 * DirRay * DirCyl * RayCyl - DirCyl * DirCyl\n                                    - DirRay * DirRay + oneMinRayCyl2 * DirDir;\n                        dist2 = dist2 / oneMinRayCyl2;\n                        if( dist2 < cylinder.radius * cylinder.radius){\n                            float origin_to_closest = (DirRay - RayCyl * DirCyl)/oneMinRayCyl2;\n                            min_dist = origin_to_closest - sqrt((cylinder.radius * cylinder.radius - dist2)/oneMinRayCyl2);\n                            if( min_dist > 0.0 && min_dist < closest_dist){\n                                vec3 cylinder_to_intersect = min_dist * ray.direction - Dir;\n                                float dist_from_cylinder_pos2 = dot(cylinder.axis, cylinder_to_intersect);\n                                if(dist_from_cylinder_pos2 < cylinder.length && dist_from_cylinder_pos2 >= 0.0){\n                                    hit = true;\n                                }\n                            }\n                        }\n                        return HitInfo(hit, min_dist);\n                    }\n        \n                    HitInfo shoot_ray_at_sphere(Ray ray, Sphere sphere, float closest_dist){\n                        bool hit = false;\n                        float dist_from_cam = 0.0;\n                        float dist_origin_to_closest = dot(ray.direction, sphere.center - ray.origin);\n                        if(dist_origin_to_closest > 0.0 && dist_origin_to_closest < closest_dist){\n                            vec3 closest_to_center = ray.origin + dist_origin_to_closest * ray.direction - sphere.center;\n                            float dist_closest_to_center2 = dot(closest_to_center, closest_to_center);\n                            if(dist_closest_to_center2 <= sphere.radius2){\n                                dist_from_cam = dist_origin_to_closest - sqrt(sphere.radius2 - dist_closest_to_center2);\n                                if(dist_from_cam < closest_dist){\n                                    hit = true;\n                                }\n                            }\n                        }\n                        return HitInfo(hit, dist_from_cam);\n                    }\n        \n                    HitInfo shoot_ray_at_square(Ray ray, Square square, float closest_dist){\n                        float cos_ray_normal = dot(ray.direction, square.norm);\n                        vec3 orig_to_square = square.pos - ray.origin;\n                        float rho = dot(orig_to_square, square.norm) / cos_ray_normal;\n                        bool hit = false;\n                        if(rho >= 0.0 && rho < closest_dist){\n                            float sigma = -dot(cross(orig_to_square, square.vDir), ray.direction) / cos_ray_normal;\n                            float rest = mod(sigma, 600.0);\n                            if(sigma >= 0.0 && sigma <= square.length && rest >= 10.0){\n                                float theta = dot(cross(orig_to_square, square.uDir), ray.direction) / cos_ray_normal;\n                                rest = mod(theta, 600.0);\n                                if(theta >= 0.0 && theta <= square.length && rest >= 10.0){\n                                    hit = true;\n                                }\n                            }\n                        }    \n                        return HitInfo(hit, rho);\n                    }\n                    \n                    void main() {\n                        vec3 ray_dir = normalize(screen_dist * camera_dir \n                                                + (gl_FragCoord.x - (width / 2.0)) * camera_right \n                                                + (gl_FragCoord.y - (height / 2.0)) * camera_up);\n                        vec3 color = vec3(0.0, 0.0, 0.0);\n                        Ray ray = Ray(camera_pos, ray_dir);\n                        float weight = 1.0;\n        \n                        for(int bounces = 0; bounces < 3; bounces++){\n                            int hitObjectId = 0;\n                            HitInfo bestHit = HitInfo(false, MAX);\n                            for(int j = 0; j < 3; j++){\n                                HitInfo thisHit = shoot_ray_at_square(ray, squares[j], bestHit.dist_from_cam);\n                                if(thisHit.hit){    \n                                    bestHit = thisHit;\n                                    hitObjectId = j;\n                                }\n                            }\n        \n                            for(int j = 0; j < "+O.MAX_SPHERES+"; j++){\n                                if( j >= numSpheres){\n                                    break;\n                                }\n                                else{\n                                    HitInfo thisHit = shoot_ray_at_sphere(ray, spheres[j], bestHit.dist_from_cam);\n                                    if(thisHit.hit){\n                                        bestHit = thisHit;\n                                        hitObjectId = 3 + j;\n                                    }\n                                }\n                            }\n        \n                            for(int j = 0; j < "+O.MAX_CYLINDERS+"; j++){\n                                if( j >= numCylinders){\n                                    break;\n                                }\n                                else{\n                                    HitInfo thisHit = shoot_ray_at_cylinder(ray, cylinders[j], bestHit.dist_from_cam);\n                                    if(thisHit.hit){\n                                        bestHit = thisHit;\n                                        hitObjectId = 3 + numSpheres + j;\n                                    }\n                                }\n                            }\n        \n                            if(bestHit.hit){\n                                float diff_coeff = 0.0;\n                                vec3 normal_at_point, hit_color;\n                                vec3 intersect_point = ray.origin + 0.99999 * bestHit.dist_from_cam * ray.direction;\n                                if ( hitObjectId < 3){\n                                    normal_at_point = squares[hitObjectId].norm;\n                                    hit_color = squares[hitObjectId].color;\n                                }\n                                else if( hitObjectId < 3 + numSpheres){\n                                    normal_at_point = spheres[hitObjectId - 3].inv_radius * (ray.origin + bestHit.dist_from_cam * ray.direction - spheres[hitObjectId - 3].center);\n                                    hit_color = spheres[hitObjectId - 3].color;\n                                }\n                                else{\n                                    int hitCylinderId = hitObjectId - 3 - numSpheres;\n                                    vec3 cylinder_pos_to_intersect = ray.origin + bestHit.dist_from_cam * ray.direction - cylinders[hitCylinderId].pos;\n                                    normal_at_point = normalize(cylinder_pos_to_intersect - dot(cylinders[hitCylinderId].axis, cylinder_pos_to_intersect) * cylinders[hitCylinderId].axis);\n                                    hit_color = cylinders[hitCylinderId].color;\n                                }\n                                vec3 point_to_light = light - intersect_point;\n                                float dist_from_light2 = dot(point_to_light, point_to_light);\n                                vec3 shadow_ray = point_to_light / sqrt(dist_from_light2);\n        \n                                bool hit_light = true;\n                                float light_cos = dot(normal_at_point, shadow_ray);\n                                Ray shadowRay = Ray(intersect_point, shadow_ray);\n                                if(light_cos > 0.0){\n                                    for (int j = 0; j < 3; j++){\n                                        if(shoot_ray_at_square( shadowRay, squares[j], MAX ).hit){\n                                            hit_light = false;\n                                            break;\n                                        }\n                                    }\n        \n                                    if(hit_light){\n                                        for (int j = 0; j < "+O.MAX_SPHERES+"; j++){\n                                            if( j >= numSpheres){\n                                                break;\n                                            }\n                                            else{\n                                                if(shoot_ray_at_sphere( shadowRay, spheres[j], MAX ).hit){\n                                                    hit_light = false;\n                                                    break;\n                                                }\n                                            }\n                                        }\n                                    }\n        \n                                    if(hit_light){\n                                        for (int j = 0; j < "+O.MAX_CYLINDERS+"; j++){\n                                            if( j >= numCylinders){\n                                                break;\n                                            }\n                                            else{\n                                                if(shoot_ray_at_cylinder( shadowRay, cylinders[j], MAX ).hit){\n                                                    hit_light = false;\n                                                    break;\n                                                }\n                                            }\n                                        }\n                                    }\n        \n                                    if(hit_light){\n                                        diff_coeff = light_cos;\n                                    }\n                                }\n                                \n                                ray = Ray(intersect_point, reflect(ray.direction, normal_at_point));\n                                float spec_coeff = pow(max(0.0, dot(shadow_ray, ray.direction)), 40.0);\n                                diff_coeff = max(0.3, diff_coeff);\n                                vec3 light_color = vec3(1.0, 1.0, 1.0);\n                                hit_color = vec3(hit_color.x * light_color.x, hit_color.y * light_color.y, hit_color.z * light_color.z);\n                                color += weight * diff_coeff * (hit_color + spec_coeff * light_color);\n                                weight *= 0.5 * diff_coeff;\n                            }\n                            else{\n                                if(bounces == 0){ color = vec3(0.7,0.7,0.7); }\n                                break;\n                            }\n                                                \n                            if(weight < 0.001){\n                                break;\n                            }\n                        }\n                        fragmentColor = vec4(color, 1.0);\n                    }"},a=new P(t,O.squares.length),i=M.loadToVAO({positions:[-1,1,-1,-1,1,-1,1,1],indices:[0,1,2,0,2,3]}),o=0;requestAnimationFrame((function t(n){var r=(n*=.001)-o;if(o=n,!0===d){var c=y-v,l=_-L;O.cameraDirection=s(O.cameraDirection,[0,1,0],c),O.cameraRight=s(O.cameraRight,[0,1,0],c),O.cameraDirection=s(O.cameraDirection,O.cameraRight,l),O.cameraUp=e(O.cameraRight,O.cameraDirection),v=y,L=_}O.drawScene(a,i,r),requestAnimationFrame(t)}))}()}),[t,n,r]),a.a.createElement("canvas",{ref:t,width:Math.min(n,800),height:Math.min(n,800)*r,style:{marginTop:"20px"}})}n(87);function w(e){var t=a.a.useState(""),n=Object(u.a)(t,2),r=n[0],i=n[1],o=a.a.useState(""),s=Object(u.a)(o,2),c=s[0],l=s[1],h=a.a.useState(""),d=Object(u.a)(h,2),f=d[0],m=d[1],p=a.a.useState(!0),g=Object(u.a)(p,2),y=g[0],_=g[1],v=a.a.useState(""),b=Object(u.a)(v,2),E=b[0],L=b[1];return a.a.useEffect((function(){r.length<3?(L("username too short"),_(!0)):c.length<8?(L("password too short"),_(!0)):"register"===e.active&&c!==f?(L("passwords must match"),_(!0)):(L(""),_(!1))}),[c,f,r]),a.a.useEffect((function(){l(""),m(""),L("")}),[e.active]),a.a.createElement("div",{className:"LogIn"},a.a.createElement("div",{className:"Userinfo"},"username:"),a.a.createElement("input",{value:r,onChange:function(e){return function(e){i(e.currentTarget.value),l(""),m("")}(e)}}),a.a.createElement("div",{className:"Userinfo"},"password:"),a.a.createElement("input",{type:"password",value:c,onChange:function(e){return l(e.currentTarget.value)}}),"register"===e.active&&a.a.createElement("div",{className:"Userinfo"},"repeat password:"),"register"===e.active&&a.a.createElement("input",{type:"password",value:f,onChange:function(e){return m(e.currentTarget.value)}}),a.a.createElement("div",{className:"Message"},E),a.a.createElement("button",{onClick:function(t){var n="register"===e.active?"/register":"/login";fetch("/api"+n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:c}),withCredentials:!0,credentials:"include"}).then((function(t){switch(t.status){case 200:t.json().then((function(t){e.setUser(t.username),e.setActive(1)}));break;case 303:L("username not available");break;case 404:L("username not found");break;case 401:L("password wrong");break;default:L("")}})).catch((function(e){return console.error(e)}))},disabled:y,className:"Rect Submit"},"Ok"))}function D(e){return a.a.createElement("div",{className:"InfoBar"},a.a.createElement("button",{onClick:function(){e.user?fetch("/api/logout",{withCredentials:!0,credentials:"include"}).then((function(t){e.setUser(null)})).catch((function(e){return console.log(e)})):e.setActive("login")},className:"Rect"},"Log ",e.user?"out":"in"),!e.user&&a.a.createElement("button",{className:"Rect",onClick:function(){return e.setActive("register")}},"Register"),a.a.createElement("div",{className:"Access"},e.user||"guest access"))}n(88);var I=n(3);n(89);function j(e,t,n,r,i,o){a.a.useEffect((function(){var a=document.getElementsByClassName("Tile"),s=document.getElementById("Tiles"),c=Array.prototype.find.call(e.current.childNodes,(function(e){return"DragDropMenu"===e.className})),l=Array.prototype.find.call(c.childNodes,(function(e){return"DragBar"===e.className})),u=document.createElement("div");u.className="Resize",e.current.appendChild(u);var h=s.getBoundingClientRect().left+window.scrollX,d=s.getBoundingClientRect().top+window.scrollY;console.log(d);var f=n.width,m=n.height,p=n.top,y=n.left,_=[y,y+f-1],v=[p,p+m-1],b=0,E=0,L=[0,0],w=!1,D=!1,I=!1;function j(){h=s.getBoundingClientRect().left+window.scrollX,d=s.getBoundingClientRect().top+window.scrollY}function R(t){Array.prototype.forEach.call(a,(function(e){e.getAttribute("row")>=v[0]&&e.getAttribute("row")<=v[1]&&e.getAttribute("col")>=_[0]&&e.getAttribute("col")<=_[1]?e.style.opacity=.15:e.style.opacity=.06})),e.current.style.transition=null,w=!0,s.style.opacity=1,L=[t.pageY-100*v[0]-d,t.pageX-100*_[0]-h]}function x(){e.current.style.transition=null,D=!0,s.style.opacity=1}function C(t){if(w||D){I=!0;var n,r,s,c,l=Math.max(t.pageY-d-L[0],0),u=Math.max(t.pageX-h-L[1],0);E=Math.floor(l/100),b=Math.floor(u/100),w?(n=E,r=E+(v[1]-v[0]),s=Math.min(12-(_[1]-_[0]+1),b),c=s+(_[1]-_[0]),e.current.style.top=l+"px",e.current.style.left=Math.min(1200-100*(_[1]-_[0]+1),u)+"px",i<r+3&&o(r+3)):(e.current.style.width=Math.min(1200,Math.max(t.pageX-h-100*_[0],100))+"px",e.current.style.height=Math.max(t.pageY-d-100*v[0],100)+"px",n=v[0],r=Math.max(E,n),s=_[0],c=Math.max(b,s)),Array.prototype.forEach.call(a,(function(e){e.getAttribute("row")>=n&&e.getAttribute("row")<=r&&e.getAttribute("col")>=s&&e.getAttribute("col")<=c?e.style.opacity=.15:e.style.opacity=.06}))}}function S(){if(I){if(w){var n=_[1]-_[0];_[1]=Math.min(b+n,11),_[0]=_[1]-n,v[1]+=E-v[0],v[0]=E,e.current.style.transition="top 200ms, left 200ms",e.current.style.top=100*E+"px",e.current.style.left=100*_[0]+"px",o=E,c=_[0],r((function(e){return e.map((function(e){return e._id===t?Object(g.a)(Object(g.a)({},e),{},{top:o,left:c}):e}))}))}D&&(_[1]=Math.min(11,b),v[1]=E,e.current.style.transition="width 200ms, height 200ms",e.current.style.width=Math.min(1200,Math.max(100*(_[1]-_[0]+1)-1,100))+"px",e.current.style.height=Math.max(100*(v[1]-v[0]+1)-1,100)+"px",a=_[1]-_[0]+1,i=v[1]-v[0]+1,r((function(e){return e.map((function(e){return e._id===t?Object(g.a)(Object(g.a)({},e),{},{width:a,height:i}):e}))})))}var a,i,o,c;w=!1,D=!1,I=!1,L=[0,0],s.style.opacity=0}return window.addEventListener("resize",j),l.addEventListener("mousedown",R),u.addEventListener("mousedown",x),document.addEventListener("mousemove",C),document.addEventListener("mouseup",S),function(){window.removeEventListener("resize",j),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",S),l.removeEventListener("mousedown",R),u.removeEventListener("mousedown",x)}}),[])}n(90);function R(e){var t=a.a.useRef(),n=a.a.useRef(),r=a.a.useRef(),i=a.a.useState(!0),o=Object(u.a)(i,2),s=o[0],c=o[1],l=a.a.useRef(!1);return a.a.useEffect((function(){var e=Array.prototype.find.call(t.current.childNodes,(function(e){return"DragBar"===e.className})),n=Array.prototype.find.call(t.current.childNodes,(function(e){return"DropDown"===e.className})),a=r.current,i=Array.prototype.find.call(a.childNodes,(function(e){return e.classList.contains("top")})),o=Array.prototype.find.call(a.childNodes,(function(e){return e.classList.contains("mid")})),s=Array.prototype.find.call(a.childNodes,(function(e){return e.classList.contains("low")}));function c(t){t.stopPropagation(),l.current?(a.classList.remove("visibleGray"),e.classList.remove("visibleGray"),n.style.opacity=0,n.style.visibility="hidden",n.style.width="0px",i.classList.remove("topBarCross"),o.style.opacity=1,s.classList.remove("lowBarCross")):(a.classList.add("visibleGray"),e.classList.add("visibleGray"),n.style.opacity=1,n.style.visibility="visible",n.style.width="100px",i.classList.add("topBarCross"),o.style.opacity=0,s.classList.add("lowBarCross")),l.current=!l.current}return a.addEventListener("mousedown",c),function(){return a.removeEventListener("mousedown",c)}}),[]),a.a.createElement("div",{ref:t,className:"DragDropMenu"},a.a.createElement("div",{className:"DropDown"},a.a.createElement("div",{onClick:e.delete,className:"menuOption delete"},"Delete"),a.a.createElement("div",{onClick:function(e){c(!1);var t=document.createEvent("MouseEvents");t.initEvent("mousedown",!0,!0),r.current.dispatchEvent(t);var a=n.current;a.classList.add("visibleGray");var i=Array.prototype.find.call(a.childNodes,(function(e){return"INPUT"===e.nodeName}));i.disabled=!1,i.style.display="inline",i.select()},className:"menuOption rename"},"Rename")),a.a.createElement("div",{ref:n,className:"DragBar"},a.a.createElement("div",{ref:r,className:"menuIcon"},a.a.createElement("div",{style:{top:"3px"},className:"menuIconBar top"}),a.a.createElement("div",{style:{top:"7px"},className:"menuIconBar mid"}),a.a.createElement("div",{style:{top:"11px"},className:"menuIconBar low"})),a.a.createElement("div",{className:"graphName",style:{display:s?"inline":"none"}},e.name||"chart"),a.a.createElement("input",{style:{display:s?"none":"inline"},className:"graphName",value:e.name||"chart",onChange:function(t){e.rename(t.currentTarget.value)},onBlur:function(){c(!0),n.current.classList.remove("visibleGray")},onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},disabled:s}),a.a.createElement("div",{width:"20px",height:"20px"})))}function x(e){var t=e.name,n=e.visualData,r=e.setVisualData,i=e.numRows,o=e.setNumRows,s=a.a.useRef(),c=a.a.useRef(),l=a.a.useRef(),u=a.a.useRef(),h=a.a.useRef(),d=a.a.useRef(),f=a.a.useRef(),m=a.a.useRef(),y=a.a.useRef(),_=a.a.useRef(),v=a.a.useRef();j(s,n._id,{top:n.top,left:n.left,width:n.width,height:n.height},r,i,o);var b=a.a.useCallback((function(){r((function(e){return e.filter((function(e){return e._id!==n._id}))}))}),[]),E=a.a.useCallback((function(e){r((function(t){return t.map((function(t){return t._id===n._id?Object(g.a)(Object(g.a)({},t),{},{name:e}):t}))}))}),[]);return a.a.useEffect((function(){console.log("remake svg");var e=100*n.width,r=100*n.height,a="graph"===n.type?n.data.map((function(e){return e[0]})):n.data.map((function(e){return e[1]}));m.current=[Math.min.apply(Math,Object(p.a)(a).concat([0])),Math.max.apply(Math,Object(p.a)(a))];var i="graph"===n.type?n.data.map((function(e){return e[1]})):n.data.map((function(e,t){return t+1}));if(y.current=[Math.round(Math.min.apply(Math,Object(p.a)(i).concat([0]))),Math.round(Math.max.apply(Math,Object(p.a)(i)))],f.current=[],"graph"===n.type&&a.forEach((function(e,t){!Math.abs(e)<Math.pow(10,-5)&&t%Math.floor(a.length/15)==0&&f.current.push(e)})),_.current=I.e().domain(m.current),_.current.range([0,e]),v.current=I.e().domain(y.current),v.current.range([r,0]),I.f(c.current).attr("preserveAspectRatio","none"),l.current=I.f(c.current).append("g"),u.current=I.f(c.current).append("g"),"bar"===n.type){var o=a.map((function(e,t){return[e,i[t],n.data[t][0]]}));h.current=I.f(c.current).append("g").selectAll(".bar").data(o).enter().append("rect").attr("x",0).attr("width",(function(e){return e[0]})).attr("y",(function(e){return e[1]-.5-.3})).attr("height",.6).attr("fill","lightblue").attr("id",(function(e,n){return t+"bar"+n})).on("mouseover",(function(){I.f(this).attr("fill","pink")})).on("mouseout",(function(){I.f(this).attr("fill","lightblue")})),d.current=I.f(c.current).append("g").selectAll(".bar").data(o).enter().append("text").text((function(e){return e[2]})).attr("x","10").style("font","14px").on("mouseover",(function(e,n){I.f("#"+t+"bar"+n).attr("fill","pink")})).on("mouseout",(function(e,n){I.f("#"+t+"bar"+n).attr("fill","lightblue")}))}else{var s=I.d().curve(I.c)(n.data);h.current=I.f(c.current).append("g").append("path").attr("d",s).style("stroke","darkgray").style("fill","none").style("stroke-width","1px").style("vector-effect","non-scaling-stroke").on("mouseover",(function(){return h.current.style("stroke","red").style("stroke-width","3px")})).on("mouseout",(function(){return h.current.style("stroke","darkgray").style("stroke-width","1px")}))}}),[]),a.a.useEffect((function(){var e=100*n.width,t=100*n.height;_.current.range([0,e]),v.current.range([t,0]),I.f(c.current).attr("viewBox","-25 -25 ".concat(e+50," ").concat(t+50));var r=I.a(_.current),a=I.b(v.current);if("graph"===n.type)r.tickValues(f.current).tickFormat((function(e){return"".concat(Math.round(10*e)/10)})),a.ticks(5);else{r.ticks(Math.round(e)/40),m.current[1]>1e4&&r.tickFormat((function(e){return"".concat(Math.floor(e/1e3),"k")})),a.ticks(0);var i=Math.min(Math.max(.26/y.current[1]*v.current(.6),14),32)+"px arial";d.current.attr("y",(function(e){return v.current(e[1]-.6)})).style("font",i)}l.current.attr("transform","translate(0,"+v.current(0)+")").call(r),u.current.attr("transform","translate("+_.current(0)+", 0)").call(a),h.current.attr("transform","\n            translate(".concat(_.current(0)," ").concat(Math.round(v.current(0)),") \n            scale(").concat(e/(m.current[1]-m.current[0])," \n                  ").concat(t/(y.current[0]-y.current[1]),")\n        "))}),[n.width,n.height]),a.a.createElement("div",{className:"DataViewer",ref:s,style:{top:100*n.top+"px",left:100*n.left+"px",width:100*n.width-1+"px",height:100*n.height-1+"px",border:"1px darkgray solid"}},a.a.createElement(R,{key:"menu"+n._id,name:n.name,delete:b,rename:E}),a.a.createElement("svg",{ref:c,style:{position:"absolute",top:"20px",left:"0",width:"100%",height:"calc(100% - 20px)"}}))}function C(e,t){var n=a.a.useState(JSON.parse(sessionStorage.getItem(e))||JSON.parse(t)),r=Object(u.a)(n,2),i=r[0],o=r[1];return a.a.useEffect((function(){sessionStorage.setItem(e,JSON.stringify(i))}),[i]),[i,o]}function S(e){var t=a.a.useState([]),n=Object(u.a)(t,2),r=n[0],i=n[1],o=C("numRows",6),s=Object(u.a)(o,2),c=s[0],l=s[1],h=C("visualData","[]"),d=Object(u.a)(h,2),f=d[0],m=d[1],g=a.a.useState("yyyy/mm/dd"),y=Object(u.a)(g,2),_=(y[0],y[1],a.a.useState("yyyy/mm/dd")),v=Object(u.a)(_,2);v[0],v[1];a.a.useEffect((function(){var e=r.length/12;if(e>c&&i((function(e){return e.slice(0,12*c)})),e<c){for(var t=[],n=e;n<c;n++)for(var o=0;o<12;o++){var s=12*n+o;t.push(a.a.createElement("div",{className:"Tile",row:n,col:o,key:"tile"+s}))}i((function(e){return[].concat(Object(p.a)(e),t)}))}document.getElementById("Tiles").style.gridTemplateRows="repeat(".concat(c,", 100px)")}),[c]),a.a.useEffect((function(){var e=Math.max.apply(Math,Object(p.a)(f.map((function(e){return e.top+e.height}))));l(e+2)}),[f]);var b=function(){fetch("/api/dash").then((function(e){return e.json()})).then((function(e){return m(e)})).catch((function(e){return console.log(e)}))};return a.a.createElement("div",{style:{marginTop:"20px"}},a.a.createElement("button",{onClick:function(){fetch("/api/twitter").then((function(e){return e.json()})).then((function(e){m((function(t){return[].concat(Object(p.a)(t),[e])}))})).catch((function(e){return console.log(e)}))},className:"Rect"},"Twitter"),a.a.createElement("button",{onClick:function(){var e=document.getElementById("start").value.split("-").join(""),t=document.getElementById("end").value.split("-").join("");fetch("/api/omniweb",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:e,endDate:t})}).then((function(e){return e.json()})).then((function(e){m((function(t){return[].concat(Object(p.a)(t),[e])}))})).catch((function(e){return console.log(e)}))},className:"Rect"},"OmniWeb"),a.a.createElement("button",{onClick:function(){fetch("/api/dash",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({graphs:f}),withCredentials:!0,credentials:"include"}).then((function(){b()})).catch((function(e){return console.log(e)}))},className:"Rect"},"save data"),a.a.createElement("button",{onClick:b,className:"Rect"},"load data"),a.a.createElement("form",null,a.a.createElement("label",null,"Start Date: "),a.a.createElement("input",{id:"start",type:"date"}),a.a.createElement("label",null,"End Date: "),a.a.createElement("input",{id:"end",type:"date"})),a.a.createElement("div",{id:"Dashboard"},a.a.createElement("div",{id:"Tiles"},r),f.map((function(e){return a.a.createElement(x,{key:e._id,name:"chart"+e._id,visualData:e,setVisualData:m,numRows:c,setNumRows:l})}))))}var k=function(){var e=C("active",1),t=Object(u.a)(e,2),n=t[0],i=t[1],o=C("jobs","[]"),s=Object(u.a)(o,2),d=s[0],f=s[1],p=Object(r.useState)(1),g=Object(u.a)(p,2),y=g[0],_=g[1],b=C("user",null),E=Object(u.a)(b,2),I=E[0],j=E[1],R=C("plans","[]"),x=Object(u.a)(R,2),k=x[0],O=x[1],N=Object(r.useState)(),P=Object(u.a)(N,2),M=P[0],A=P[1];return a.a.useEffect((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("getting data from server"),e.next=4,fetch("http://localhost:4000/api/jobs");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,f(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),a.a.useEffect((function(){switch(n){case 1:A(a.a.createElement(m,{jobs:d,currentPage:y,setCurrentPage:_}));break;case 2:A(a.a.createElement(v,{plans:k,setPlans:O}));break;case 3:A(a.a.createElement(L,null));break;case 4:A(a.a.createElement(S,null));break;case"login":case"register":A(a.a.createElement(w,{setUser:j,active:n,setActive:i}));break;default:A()}}),[n,y,k]),a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"TitleBar"},a.a.createElement("div",{className:"LeftInfo"}),a.a.createElement("h1",{className:"Title"},"my_app ",n),a.a.createElement(D,{setPlans:O,setUser:j,user:I,setActive:i})),a.a.createElement(h,{clickHandler:i,activeMenu:n}),M)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[74,1,2]]]);
//# sourceMappingURL=main.8e194dc7.chunk.js.map